sources:
  - R

packages:
  - raster
  - maptools
  - ggplot2
  - dplyr
  - ape
  - phytools
  - ggforce
  - phylolm
  - phylosignal
  - phylobase
  - rmarkdown
  - stringr
  - corrplot
  - lme4
  - tibble
  - visreg

targets:
  all:
    depends:
      - figures/bird_urbanness_phylo.pdf
      - figures/urbanness.pdf
      - figures/density_plot_per_species.pdf
      - figures/histogram_plot_per_species.pdf
      - figures/distribution_response_variables.pdf
      - reports/phylo_report.pdf
 #     - reports/non_phylo_report.pdf
      
  bird_tree:
    command: read_bird_tree() 

  traits:
    command: read_process_trait_data()
  
  ebird_data:
    command: load_ebird_data()

  aus_bird_tree:
    command: subset_tree(bird_tree,traits)

  urbanness_table: 
    command: get_urbanness_table()
    
  response_variables:
    command: make_response_variables(ebird_data)

  figures/bird_urbanness_phylo.pdf:
    command: plot_bird_tree_traits(aus_bird_tree,traits,response_variables)

  figures/urbanness.pdf:
    command: urbanness_pdf(urbanness_table)
    
  figures/density_plot_per_species.pdf:
    command: avg_rad_density_for_each_species(ebird_data)
    check: exists
    
  figures/distribution_response_variables.pdf:
    command: distribution_response_variables(response_variables)
  
  figures/histogram_plot_per_species.pdf:
    command: avg_rad_density_for_each_species(ebird_data)
    check: exists
 
  reports/phylo_report.pdf:
    command: render("reports/phylo_report.rmd")
    depends: 
      - traits
      - aus_bird_tree
      - response_variables

  reports/non_phylo_report.pdf:
    command: render("reports/non_phylo_report.rmd")
    depends: 
      - traits
      - response_variables